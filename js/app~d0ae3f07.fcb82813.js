(function(e){function t(t){for(var n,s,r=t[0],c=t[1],l=t[2],u=0,m=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var c=a[r];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={"app~d0ae3f07":0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;i.push([0,"chunk-vendors~0f485567","chunk-vendors~41a6ab2c","chunk-vendors~e4173fa2","chunk-vendors~7274e1de","chunk-vendors~31c671ca","chunk-vendors~db300d2f","chunk-vendors~00cb062a","chunk-vendors~f63129db","chunk-vendors~ec8c427e","chunk-vendors~fdc6512a","chunk-vendors~b1f96ece","chunk-vendors~d2305125","chunk-vendors~4a7e9e0b","chunk-vendors~237e29c4","chunk-vendors~dde583c9","chunk-vendors~38685bf9"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01cc":function(e,t,a){},"034f":function(e,t,a){"use strict";a("85ec")},"09df":function(e,t,a){"use strict";a("63c0")},"0c24":function(e,t,a){},"1c5f":function(e,t,a){"use strict";a("01cc")},2538:function(e,t,a){},2914:function(e,t,a){"use strict";a("400d")},"400d":function(e,t,a){},"4ff7":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("d3b7"),a("159b"),a("b0c0"),a("3ca3"),a("ddb0");var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.menuOpen,expression:"!menuOpen"}],staticClass:"open-menu",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.openMenu()}}},[a("svg",{staticStyle:{cursor:"pointer"},attrs:{width:"22",height:"11",viewBox:"0 0 22 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",icon:"burger"}},[a("path",{attrs:{d:"M1 0.5H21",stroke:"white","stroke-linecap":"round"}}),a("path",{attrs:{d:"M1 5.5H21",stroke:this.$styleConfig.colors.purple.primary,"stroke-linecap":"round"}}),a("path",{attrs:{d:"M1 10.5H21",stroke:this.$styleConfig.colors.yellow.primary,"stroke-linecap":"round"}})])]),a("SideNav"),a("v-container",{staticClass:"pa-0 blue lighten-5",attrs:{fluid:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{cols:"1",sm:"12"}},[a("Map")],1)],1),a("v-icon",{class:{retract:!0,"panel-toggle":!0,hidden:e.panelExpanded||this.$store.getters.getNavMenuExpanded},attrs:{dark:""},on:{click:function(t){return e.toggleExpand()}}},[e._v("mdi-chevron-double-left")]),a("v-icon",{class:{expand:!0,"panel-toggle":!0,hidden:!e.panelExpanded||this.$store.getters.getNavMenuExpanded},attrs:{dark:""},on:{click:function(t){return e.toggleExpand()}}},[e._v("mdi-chevron-double-right")]),a("InfoPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelExpanded,expression:"panelExpanded"}],ref:"infoPanel"})],1),a("MainFooter")],1)},o=[],i=(a("9861"),a("ac1f"),a("841c"),a("1276"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:{expanded:this.mapExpanded,"mapboxgl-map":!0},attrs:{id:"main-map"}})])}),s=[],r=(a("2b3d"),a("caad"),a("2532"),a("5319"),a("4de4"),a("a15b"),a("b680"),a("e192")),c=a.n(r),l=a("885b"),d=a.n(l),u=(a("c307"),a("bc3a")),m=a.n(u),h=a("b85c"),p=a("d4ec"),f=a("bee2"),v=a("2b0e"),g=a("2f62"),y=a("c6c6"),w=a.n(y),b=a("5530"),_=a("8c4f"),C=function(){function e(){Object(p["a"])(this,e),v["default"].use(_["a"]),this._vue=new v["default"]({router:new _["a"]({mode:"history"})}),this.router=this._vue.$router,this.route=this._vue.$route}return Object(f["a"])(e,[{key:"addQueryParam",value:function(e,t){if(e&&t){var a=Object(b["a"])({},this._vue.$route.query);a[e]=t,this._vue.$router.replace({query:a,hash:window.location.hash}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||console.error(e)}))}}},{key:"removeQueryParam",value:function(e){var t=Object(b["a"])({},this._vue.$route.query);delete t[e],this._vue.$router.replace({query:t,hash:window.location.hash}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||console.error(e)}))}}]),e}();v["default"].use(g["a"]);var k=new g["a"].Store({state:function(){return{selectedLngLat:[],mobile:!1,selectedEventId:-1,infoPanelExpanded:!1,navMenuExpanded:!1}},mutations:{resetSelection:function(e){e.selectedLngLat=[]},setSelectedEventId:function(e,t){e.selectedEventId=t;var a=new C;t>0?a.addQueryParam("event",t):a.removeQueryParam("event")},setSelectedLngLat:function(e,t){e.selectedLngLat=t},setMobile:function(e){var t=new w.a(window.navigator.userAgent);t.mobile()&&(e.mobile=!0),e.mobile=window.innerWidth<800},setInfoPanelExpanded:function(e,t){e.infoPanelExpanded=t},setNavMenuExpanded:function(e,t){e.navMenuExpanded=t}},getters:{getInfoPanelExpanded:function(e){return e.infoPanelExpanded},getNavMenuExpanded:function(e){return e.navMenuExpanded},getSelectedEventId:function(e){return e.selectedEventId},getSelectedLngLat:function(e){return e.selectedLngLat},isMobile:function(e){return e.mobile}},modules:{}}),$=k,L=new v["default"]({store:$,mounted:function(){},methods:{}}),x=function(){function e(){Object(p["a"])(this,e),this._vue=new v["default"]}return Object(f["a"])(e,[{key:"onAdd",value:function(e){var t=this;this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl basemap-control-container",this._container.innerHTML='\n        <div class="large-control">\n            <b>Choose a basemap:</b> \n            <ul class="list-unstyled">\n                <li><span class="radio">\n                    <label class="basemap"><input type="radio" id="street-style" checked name="basemap" value="StreetMap"> Street Map </label>\n                    </span>\n                </li>\n                <li><span class="radio">\n                    <label class="basemap"><input type="radio" id="satellite-style" name="basemap" value="SatelliteImagery"> Satellite </label>\n                    </span>\n                </li>\n            </ul>\n        </div>\n        ';var a,n=this._container.getElementsByTagName("input"),o=Object(h["a"])(n);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.onclick=function(e){var a=t._vue.$mainConfig[e.target.id];t._vue.$map.setStyle(a),L.$emit("switch-base")}}}catch(s){o.e(s)}finally{o.f()}return this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}]),e}(),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.legendVisible,expression:"legendVisible"}],staticClass:"legend-container",attrs:{dense:"",dark:"",elevation:"2",rounded:"false"}},[a("v-card-title",{staticClass:"legend-title",attrs:{dense:""}},[e._v("Legend")]),a("v-divider"),a("ul",{staticClass:"legend-list"},e._l(this.$mainConfig["legend-items"],(function(t){return a("li",{key:t.display,staticClass:"list-item"},[a("span",{staticClass:"legend-item",style:t.css}),e._v(e._s(t.text)+" ")])})),0),a("v-divider"),a("v-card-text",[e._v(" Additional Layers "),a("br"),e._v(" (click to activate): "),a("v-divider"),a("v-chip-group",{attrs:{"active-class":"blue accent-4 white--text",column:""},model:{value:e.toggledLayer,callback:function(t){e.toggledLayer=t},expression:"toggledLayer"}},e._l(e.legendLayers,(function(t){return a("span",{key:t["layer-id"]},[a("v-chip",{staticStyle:{margin:"0 auto"},attrs:{filter:""},on:{click:function(a){return e.toggleLayer(t)}}},[e._v(" "+e._s(t["legend-display"])+" ")]),t["legend-note"]?a("div",{staticStyle:{"text-align":"center",margin:"0 auto"},domProps:{innerHTML:e._s(t["legend-note"])}}):e._e()],1)})),0)],1)],1)},E=[],S={name:"Legend",data:function(){return{toggledLayer:""}},mounted:function(){this.mobileOnMounted=window.innerHeight>window.innerWidth},computed:{legendLayers:function(){return this.$mainConfig["toggleable-layers"]},legendVisible:function(){return!(window.innerHeight>window.innerWidth&&this.$store.getters.getInfoPanelExpanded)}},methods:{toggleLayer:function(e){e&&(this.$layerManager.toggleLayer(e["layer-id"]),e.labels&&this.$layerManager.toggleLayer(e["layer-id"]+"-labels"))}}},D=S,j=(a("9a5b"),a("2877")),O=a("6544"),H=a.n(O),P=a("b0af"),T=a("99d9"),N=a("cc20"),V=a("ef9a"),F=a("ce7e"),I=Object(j["a"])(D,M,E,!1,null,null,null),q=I.exports;H()(I,{VCard:P["a"],VCardText:T["a"],VCardTitle:T["b"],VChip:N["a"],VChipGroup:V["a"],VDivider:F["a"]});var A=a("ce5b"),z=a.n(A),U=a("f309"),R=function(){function e(){Object(p["a"])(this,e),this._vue=new v["default"],v["default"].use(z.a)}return Object(f["a"])(e,[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl legend-control-container";var t=v["default"].extend(q),a=new t({store:$,vuetify:new U["a"]});return a.$mount(),this._container.appendChild(a.$el),this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}}]),e}(),W=function(){function e(){Object(p["a"])(this,e),this._vue=new v["default"]({store:$}),this.proposalNames={},L.$on("select-item-from-url",this.selectFromUrl.bind(this));var t=this;this._vue.$map.once("idle",(function(){L.$on("select-from-address-search",t.selectFromAddressSearch.bind(t)),L.$on("select-from-district-search",t.selectFromDistrictSearch.bind(t)),L.$on("select-from-click",t.selectFromClick.bind(t)),L.$on("select-from-type-switch",t.selectFromTypeSwitch.bind(t)),L.$on("select-from-proposal-switch",t.selectFromProposalSwitch.bind(t)),L.$on("select-url-event",t.selectEventFromUrl.bind(t))}))}return Object(f["a"])(e,[{key:"selectEventFromUrl",value:function(){var e=new URLSearchParams(location.search);if(e.get("event")){var t=e.get("event");this._vue.$store.commit("setSelectedEventId",+t),L.$emit("select-from-url",t);var a=this;this._vue.$nextTick((function(){a._vue.$layerManager.styleCircleSelection()}))}}},{key:"updateMapSelection",value:function(e){this._vue.$nextTick((function(){e.lnglat[1]&&e.lnglat[0]}))}},{key:"selectFromAddressSearch",value:function(e){console.log("select-from-address-search"),this.selectDistrictOnMapFromLatLng(e,!0,"select-from-address-search")}},{key:"selectFromDistrictSearch",value:function(e){console.log("select-from-district-search"),this.selectDistrictOnMapFromLatLng(e,!0,"select-from-district-search")}},{key:"selectFromClick",value:function(e){console.log("select-from-click"),this.selectDistrictOnMapFromLatLng(e,!1,"select-from-click")}},{key:"selectFromTypeSwitch",value:function(e){console.log("select-from-type-switch"),this.selectDistrictOnMapFromLatLng(e,!1,"select-from-type-switch")}},{key:"selectFromProposalSwitch",value:function(e){console.log("select-from-proposal-switch"),this.selectDistrictOnMapFromLatLng(e,!1,"select-from-proposal-switch")}},{key:"selectFromUrl",value:function(e){this.selectDistrictOnMapFromLatLng(e,!1,"select-from-url")}}]),e}(),B=a("1157"),G=a.n(B),Z={name:"Map",components:{},data:function(){return{mapExpanded:!1}},mounted:function(){var e=this;c.a.accessToken=this.$mainConfig.api.keys["mb-key"],this.map=new c.a.Map(this.$mainConfig.mapConfig);var t=v["default"].prototype.$map=this.map;v["default"].prototype.$eventManager=new W;var a=this;L.$on("toggle-panel",(function(e){a.mapExpanded=!e,a.$nextTick((function(){a.map.resize()}))}));var n=new d.a({accessToken:c.a.accessToken,mapboxgl:c.a,marker:!1,placeholder:"Search for address"});t.addControl(n),t.addControl(new c.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.addControl(new x,"top-left"),t.addControl(new c.a.ScaleControl,"bottom-right"),t.addControl(new c.a.NavigationControl,"bottom-right"),t.once("idle",(function(){G()("body > #loading").fadeOut(),a.initLayers()})),t.on("moveend",(function(){var e=new URL(location.href);if(e.hash.includes("##")){var t=location.href.replace(/(?<=#).*?(?=&)/g,"");window.history.replaceState({},"",t.replace("##","#"))}})),t.on("mousemove",(function(){t.getCanvas().style.cursor="crosshair"})),t.on("mouseout",(function(){t.getCanvas().style.cursor=""})),t.on("click",(function(n){var o=t.queryRenderedFeatures(n.point);if(0===o.length)return a.$store.commit("setSelectedEventId",-1),a.$layerManager.styleCircleSelection(),void L.$emit("clear-event");var i=o.filter((function(e){return"event-hit-layer"===e.layer.id})).map((function(e){return e.properties}));L.$emit("new-panel",i),e.$store.commit("setSelectedEventId",1===i.length?i[0].name:-1),a.$nextTick((function(){a.$layerManager.styleCircleSelection()}))})),L.$on("clear-selected",(function(){a.marker&&(a.marker.remove(),a.marker=null)})),L.$on("switch-base",this.initLayers),L.$on("zoom-to",this.zoomTo)},methods:{initLayers:function(){this.$layerManager.addLayerToMap({type:"baserow",map:this.map,sizeLimit:150,tableid:this.$mainConfig.api.baserow.tables.main,style:this.$styleConfig["baserow-markers"]}),this.$layerManager.initToggledLayersFromUrl(this.map);var e=this;this.legendControl||(this.legendControl=new R,e.map.addControl(new R,"bottom-left"))},zoomTo:function(){},addMarker:function(e){var t=this;t.marker&&t.marker.remove(),t.$querystringManager.addQueryParam("selected",[e.lngLat.lng.toFixed(3),e.lngLat.lat.toFixed(3)].join(","))}},watch:{}},Q=Z,J=(a("2914"),a("a216"),Object(j["a"])(Q,i,s,!1,null,"e9d5bb4a",null)),X=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"info-panel"}},[a("div",{class:e.dat.length>0?"hidden":""},[a("h3",{staticStyle:{"font-family":"'ZillaSlab'","font-size":"24px"}},[e._v(" Working Class History | Map ")]),a("br"),a("p",[e._v(" History isn't made by kings and politicians, it is made by us: billions of ordinary people. This is a map containing our historical stories of our collective struggles to build a better world. ")]),e._m(0)]),a("div",{class:e.dat.length>0?"":"hidden"},[a("div",{staticClass:"close-btn",on:{click:function(t){return e.selectDat(null)}}},[a("v-icon",{staticClass:"close-btn",attrs:{dark:""}},[e._v("mdi-close")])],1),e.dat.length>1?a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[a("h3",{style:{"text-align":"center","font-family":"ZillaSlab",background:this.$styleConfig.colors.yellow.primary,padding:"5px"}},[e._v(" Events near here ")]),a("v-list",{staticStyle:{"font-family":"'Roboto'"},attrs:{dense:""}},[a("span",{staticStyle:{padding:"10px"}},[e._v("Select one:")]),a("v-divider"),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.dat,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",{on:{click:function(a){return e.selectDat(t.name)}}},[a("v-list-item-title",{staticStyle:{"font-weight":"bold"},domProps:{textContent:e._s(t.title)}})],1)],1)})),1)],1)],1):e._e(),e.selectedDat.length>0&&1===e.dat.length?a("div",[a("h3",{staticClass:"info-title popup-title"},[e._v(e._s(e.selectedDat[0].title))]),a("br"),a("v-divider"),a("br"),a("p",{staticClass:"info-description"},[e._v(e._s(e.selectedDat[0].description))]),a("div",{class:e.selectedDat[0].media?"media-container info-photo":"hidden info-photo"},[a("div",{staticClass:"img-container"},[a("img",{attrs:{src:e.selectedDat[0].media}})]),a("p",{staticClass:"img-caption"},[e._v(e._s(e.selectedDat[0].media_caption))]),a("p",{staticClass:"img-caption"},[e._v(e._s(e.selectedDat[0].media_credit))])]),a("v-divider"),a("div",[e._v(" "+e._s(e.selectedDat[0].geotag_info)+": "+e._s(e.selectedDat[0].geotag_description)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].visitor_info.length>0,expression:"selectedDat[0].visitor_info.length > 0"}]},[e._v(" "+e._s(e.selectedDat[0].visitor_info)+" ")]),a("v-divider"),a("ul",{staticClass:"info-list"},[a("li",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].author_name.length>0,expression:"selectedDat[0].author_name.length > 0"}],staticClass:"info-author"},[a("span",{staticClass:"list-title"},[e._v("Author:")]),a("a",{attrs:{href:e.selectedDat[0].author_url,target:"_blank"}},[e._v(e._s(e.selectedDat[0].author_name))])]),a("li",{staticClass:"info-learn"},[a("a",{attrs:{href:this.$baseurl+"/article/"+e.selectedDat[0].id+"/"+e.selectedDat[0].title.replaceAll(" ","-"),target:"_blank"}},[e._v("Learn More")])]),a("li",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].merch_url.length>0,expression:"selectedDat[0].merch_url.length > 0"}],staticClass:"info-merch"},[a("a",{attrs:{href:e.selectedDat[0].merch_url,target:"_blank"}},[e._v("Related Merch")])]),a("li",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].podcast_url.length>0,expression:"selectedDat[0].podcast_url.length > 0"}],staticClass:"info-podcast"},[a("a",{attrs:{href:e.selectedDat[0].podcast_url,target:"_blank"}},[e._v("Related Podcast")])]),a("li",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].books_url.length>0,expression:"selectedDat[0].books_url.length > 0"}],staticClass:"info-book"},[a("a",{attrs:{href:e.selectedDat[0].books_url,target:"_blank"}},[e._v("Related Books")])]),a("li",{directives:[{name:"show",rawName:"v-show",value:e.selectedDat[0].latitude.length>0&&e.selectedDat[0].longitude.length>0,expression:"\n            selectedDat[0].latitude.length > 0 &&\n            selectedDat[0].longitude.length > 0\n          "}],staticClass:"info-googlemaps"},[a("a",{attrs:{target:"_blank",href:"https://maps.google.com?q="+e.selectedDat[0].latitude+","+e.selectedDat[0].longitude}},[e._v("Open in Google Maps")])])]),a("div",{staticClass:"zoom-to"},[a("a",{attrs:{href:"#"},on:{click:function(t){return e.zoomTo({lat:e.selectedDat[0].latitude,lng:e.selectedDat[0].longitude})}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-magnify")]),a("span",{staticClass:"list-title"},[e._v("Zoom To")])],1)])],1):e._e(),e.loading?a("div",{staticClass:"side-loading"},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e()],1)])},Y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" Here you can browse stories geographically, and you can click through to our "),a("a",{attrs:{href:"https://working-class-history.netlify.app/"}},[e._v("Stories app")]),e._v(" to see more information like sources for each story. Our work is funded entirely by our readers and listeners on patreon, so if you value our work please consider "),a("a",{attrs:{href:"https://patreon.com/workingclasshistory"}},[e._v("supporting us.")])])}],ee=(a("99af"),{name:"InfoPanel",data:function(){return{dat:[],selectedDat:[],loading:!0}},mounted:function(){var e=this;L.$on("clear-event",(function(){return e.selectDat(null)})),L.$on("select-from-url",(function(t){m()({method:"GET",url:"https://api.baserow.io/api/database/rows/table/".concat(e.$mainConfig.api.baserow.tables.main,"/").concat(t,"/?user_field_names=true"),headers:{Authorization:"Token ".concat(e.$mainConfig.api.keys.baserow)}}).then((function(t){e.selectedDat=[t.data],e.dat=[t.data],e.loading=!1})).catch((function(t){console.error(t),e.selectedDat=[],e.dat=[],e.loading=!1}))}))},methods:{setData:function(e){this.dat=e,this.loading=!1,1===e.length&&this.selectDat(e[0].name),e.length>0&&L.$emit("force-info-open")},selectDat:function(e){var t=this,a=this;if(!e)return this.selectedDat=[],this.dat=[],this.$store.commit("setSelectedEventId",-1),this.$layerManager.styleCircleSelection(),void("portrait"===this.getOrientation()&&L.$emit("force-info-close"));this.loading=!0;var n=this.dat.filter((function(t){return t.name===e}))[0].name;this.$store.commit("setSelectedEventId",n),this.$nextTick((function(){a.$layerManager.styleCircleSelection()})),m()({method:"GET",url:"https://api.baserow.io/api/database/rows/table/".concat(this.$mainConfig.api.baserow.tables.main,"/").concat(n,"/?user_field_names=true"),headers:{Authorization:"Token ".concat(this.$mainConfig.api.keys.baserow)}}).then((function(e){t.selectedDat=[e.data],t.dat=[e.data],t.loading=!1})).catch((function(e){console.error(e),t.selectedDat=[],t.dat=[],t.loading=!1}))},zoomTo:function(e){this.$map.flyTo({center:[e.lng,e.lat],zoom:9,essential:!0})}}}),te=ee,ae=(a("6cbf"),a("132d")),ne=a("8860"),oe=a("da13"),ie=a("5d23"),se=a("1baa"),re=a("490a"),ce=Object(j["a"])(te,K,Y,!1,null,null,null),le=ce.exports;H()(ce,{VCard:P["a"],VDivider:F["a"],VIcon:ae["a"],VList:ne["a"],VListItem:oe["a"],VListItemContent:ie["a"],VListItemGroup:se["a"],VListItemTitle:ie["b"],VProgressCircular:re["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{color:"rgb(18, 2, 50)"}},[a("nav",{staticClass:"jetpack-social-navigation jetpack-social-navigation-genericons",attrs:{"aria-label":"Social Links Menu"}},[a("div",{staticClass:"menu-social-menu-container"},[a("ul",{staticClass:"menu",attrs:{id:"menu-social-menu"}},[a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-35\n          ",attrs:{id:"menu-item-35"}},[a("a",{attrs:{rel:"noopener",href:"http://instagram.com/workingclasshistory",onclick:"javascript:window.open('http://instagram.com/workingclasshistory'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-instagram")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-27\n          ",attrs:{id:"menu-item-27"}},[a("a",{attrs:{rel:"noopener",href:"https://www.facebook.com/workingclasshistory/",onclick:"javascript:window.open('https://www.facebook.com/workingclasshistory/'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-facebook")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-26\n          ",attrs:{id:"menu-item-26"}},[a("a",{attrs:{rel:"noopener",href:"http://twitter.com/wrkclasshistory",onclick:"javascript:window.open('http://twitter.com/wrkclasshistory'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-twitter")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-34\n          ",attrs:{id:"menu-item-34"}},[a("a",{attrs:{rel:"noopener",href:"https://open.spotify.com/show/3dqQUrBAmXgoU1Q6hcUnBX",onclick:"javascript:window.open('https://open.spotify.com/show/3dqQUrBAmXgoU1Q6hcUnBX'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-spotify")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-54\n          ",attrs:{id:"menu-item-54"}},[a("a",{attrs:{rel:"noopener",href:"https://workingclasshistory.tumblr.com/",onclick:"javascript:window.open('https://workingclasshistory.tumblr.com/'); return false;"}},[a("img",{staticClass:"v-icon v-icon",attrs:{width:"25px",src:"assets/icons/ico_tumblr.svg",alt:"tumblr"}})])]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-28\n          ",attrs:{id:"menu-item-28"}},[a("a",{attrs:{rel:"noopener",href:"https://www.youtube.com/c/workingclasshistory",onclick:"javascript:window.open('https://www.youtube.com/c/workingclasshistory'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-youtube")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-1297\n          ",attrs:{id:"menu-item-1297"}},[a("a",{attrs:{href:"https://mastodon.social/@workingclasshistory",onclick:"javascript:window.open('https://mastodon.social/@workingclasshistory'); return false;"}},[a("v-icon",{staticClass:"icon-class",attrs:{dark:""}},[e._v("mdi-mastodon")])],1)]),a("li",{staticClass:"\n            menu-item\n            menu-item-type-custom\n            menu-item-object-custom\n            menu-item-54\n          ",attrs:{id:"menu-item-54"}},[a("a",{attrs:{rel:"noopener",href:"https://tiktok.com/@workingclasshistory",onclick:"javascript:window.open('https://tiktok.com/@workingclasshistory/'); return false;"}},[a("img",{staticClass:"v-icon v-icon",attrs:{width:"22px",src:"assets/icons/ico_tiktok.svg",alt:"tumblr"}})])])])])]),a("div",{staticClass:"\n      menu-item menu-item-type-custom menu-item-object-custom menu-item-1297\n    ",attrs:{id:"wijfi"}},[a("a",{attrs:{href:"https://github.com/Willjfield/WCH_Map",onclick:"javascript:window.open('https://github.com/Willjfield/WCH_Map'); return false;"}},[e._v("map by will field "),a("v-icon",{staticClass:"icon-class",attrs:{dark:"",small:""}},[e._v("mdi-github")])],1)])])},ue=[],me={name:"MainFooter"},he=me,pe=(a("1c5f"),a("553a")),fe=Object(j["a"])(he,de,ue,!1,null,null,null),ve=fe.exports;H()(fe,{VFooter:pe["a"],VIcon:ae["a"]});var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ma-0 pa-0 side-nav-container"},[a("v-navigation-drawer",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"nav-drawer",attrs:{dark:"",permanent:""}},[a("a",{staticClass:"wch-menu-logo outer lower",attrs:{href:"/"}},[a("svg",{staticStyle:{"margin-bottom":"5%"},attrs:{width:"86",height:"86",viewBox:"0 0 86 86",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M85.8974 0H0V85.8974H85.8974V0Z",fill:"#FAD40A"}}),a("path",{attrs:{d:"M67.893 70.8456V59.6943H58.201V70.8456H53V46H58.201V55.3553H67.893V46H73.131V70.8456H67.893Z",fill:"black",stroke:"black","stroke-width":"0.205251"}}),a("path",{attrs:{d:"M58.1876 48.1384C57.9126 49.5608 57.4774 50.8457 56.8781 51.993C56.2788 53.1404 55.5234 54.1256 54.6142 54.9486C53.7029 55.7717 52.6499 56.408 51.4513 56.8575C50.2547 57.307 48.9308 57.5307 47.4858 57.5307C45.8643 57.5307 44.3475 57.2557 42.9395 56.7076C41.5295 56.1596 40.3144 55.3366 39.2922 54.2385C38.2701 53.1404 37.4655 51.7878 36.8785 50.1786C36.2915 48.5694 36 46.6935 36 44.5465C36 42.4509 36.2668 40.5606 36.8046 38.8775C37.3403 37.1945 38.1079 35.7721 39.1054 34.6124C40.103 33.4527 41.3201 32.562 42.7548 31.9359C44.1895 31.312 45.7905 31 47.5638 31C49.1094 31 50.5133 31.2299 51.7735 31.6917C53.0337 32.1535 54.1195 32.7898 55.0288 33.6005C55.9401 34.4113 56.6626 35.3657 57.1983 36.4638C57.734 37.5619 58.0644 38.7338 58.1896 39.9818H52.9886C52.6397 38.5594 51.9664 37.4572 50.9669 36.6711C49.9694 35.885 48.8466 35.4929 47.5987 35.4929C45.4292 35.4929 43.8324 36.2729 42.8082 37.8307C41.786 39.3906 41.2749 41.5294 41.2749 44.2489C41.2749 47.0178 41.7799 49.1688 42.7897 50.7041C43.7995 52.2373 45.3163 53.0049 47.336 53.0049C48.8815 53.0049 50.1233 52.5883 51.0592 51.7508C51.9952 50.9155 52.6356 49.7106 52.9865 48.1405H58.1876V48.1384Z",fill:"black",stroke:"black","stroke-width":"0.205251"}}),a("path",{attrs:{d:"M31.6815 39.8456L27.8269 23.6821L23.8984 39.8456H19.0339L12 15H17.5377L21.616 31.0896L25.058 15H30.5218L34.3005 31.0896L38.3419 15H43.6558L36.6958 39.8456H31.6815Z",fill:"black",stroke:"black","stroke-width":"0.205251"}})])]),a("div",{staticClass:"ant-layout-sider-children"},[a("div",{staticClass:"css-19iid9s"},[a("a",{staticClass:"wch-menu-logo upper",attrs:{href:this.$baseurl+"/"}},[a("svg",{staticStyle:{"margin-bottom":"5%"},attrs:{width:"86",height:"86",viewBox:"0 0 86 86",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M85.8974 0H0V85.8974H85.8974V0Z",fill:"#FAD40A"}}),a("path",{attrs:{d:"M67.893 70.8456V59.6943H58.201V70.8456H53V46H58.201V55.3553H67.893V46H73.131V70.8456H67.893Z",fill:"black",stroke:"black","stroke-width":"0.205251"}}),a("path",{attrs:{d:"M58.1876 48.1384C57.9126 49.5608 57.4774 50.8457 56.8781 51.993C56.2788 53.1404 55.5234 54.1256 54.6142 54.9486C53.7029 55.7717 52.6499 56.408 51.4513 56.8575C50.2547 57.307 48.9308 57.5307 47.4858 57.5307C45.8643 57.5307 44.3475 57.2557 42.9395 56.7076C41.5295 56.1596 40.3144 55.3366 39.2922 54.2385C38.2701 53.1404 37.4655 51.7878 36.8785 50.1786C36.2915 48.5694 36 46.6935 36 44.5465C36 42.4509 36.2668 40.5606 36.8046 38.8775C37.3403 37.1945 38.1079 35.7721 39.1054 34.6124C40.103 33.4527 41.3201 32.562 42.7548 31.9359C44.1895 31.312 45.7905 31 47.5638 31C49.1094 31 50.5133 31.2299 51.7735 31.6917C53.0337 32.1535 54.1195 32.7898 55.0288 33.6005C55.9401 34.4113 56.6626 35.3657 57.1983 36.4638C57.734 37.5619 58.0644 38.7338 58.1896 39.9818H52.9886C52.6397 38.5594 51.9664 37.4572 50.9669 36.6711C49.9694 35.885 48.8466 35.4929 47.5987 35.4929C45.4292 35.4929 43.8324 36.2729 42.8082 37.8307C41.786 39.3906 41.2749 41.5294 41.2749 44.2489C41.2749 47.0178 41.7799 49.1688 42.7897 50.7041C43.7995 52.2373 45.3163 53.0049 47.336 53.0049C48.8815 53.0049 50.1233 52.5883 51.0592 51.7508C51.9952 50.9155 52.6356 49.7106 52.9865 48.1405H58.1876V48.1384Z",fill:"black",stroke:"black","stroke-width":"0.205251"}}),a("path",{attrs:{d:"M31.6815 39.8456L27.8269 23.6821L23.8984 39.8456H19.0339L12 15H17.5377L21.616 31.0896L25.058 15H30.5218L34.3005 31.0896L38.3419 15H43.6558L36.6958 39.8456H31.6815Z",fill:"black",stroke:"black","stroke-width":"0.205251"}})])]),a("div",{staticClass:"menu-mobile-close-btn",on:{click:function(t){return e.hideMobileMenu()}}},[a("svg",{staticStyle:{cursor:"pointer"},attrs:{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",icon:"close"}},[a("path",{attrs:{d:"M16.3575 1.64215L1.61394 16.3857",stroke:"#FAD40A","stroke-width":"1.32678","stroke-linecap":"round"}}),a("path",{attrs:{d:"M1.61334 1.64106L16.3569 16.3846",stroke:"white","stroke-width":"1.32678","stroke-linecap":"round"}})])]),a("h3",{staticClass:"ant-typography css-16shlwq",attrs:{weight:"bold",mb:"1",mt:"2"}},[e._v(" Menu ")]),a("div",{staticClass:"list-container"},[a("a",{staticClass:"css-1xqwpqk",attrs:{href:this.$baseurl+"/stories"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Stories ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{target:"_blank",href:"https://workingclasshistory.com/podcast/"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Podcast ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{target:"_blank",href:"https://workingclasshistory.com/sign-up/"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Sign Up ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{target:"_blank",href:"https://workingclasshistory.com/support/"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Support Us ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{href:this.$baseurl+"/contribute"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Contribute ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{target:"_blank",href:"https://shop.workingclasshistory.com/"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" Shop ")])]),a("a",{staticClass:"css-1xqwpqk",attrs:{target:"_blank",href:"https://workingclasshistory.com/"}},[a("div",{staticClass:"ant-typography css-107d6n4",attrs:{weight:"regular",color:"neutral"}},[e._v(" WCH Home ")])])])])])])],1)},ye=[],we={name:"SideNav",data:function(){return{expanded:!1,orientation:"landscape"}},mounted:function(){this.orientation=this.getOrientation();var e=this;window.addEventListener("resize",(function(){e.orientation=e.getOrientation()})),L.$on("open-main-menu",(function(){e.expanded=!0,L.$emit("force-info-close")}))},methods:{hideMobileMenu:function(){L.$emit("close-main-menu"),this.$store.commit("setNavMenuExpanded",!1),this.expanded=!1}},computed:{showMenu:function(){return this.expanded&&"portrait"===this.orientation||"landscape"===this.orientation}}},be=we,_e=(a("09df"),a("f774")),Ce=Object(j["a"])(be,ge,ye,!1,null,null,null),ke=Ce.exports;H()(Ce,{VNavigationDrawer:_e["a"]});var $e=function e(){Object(p["a"])(this,e),this._vue=new v["default"]},Le=(a("5b81"),a("2514")),xe=function(){function e(){Object(p["a"])(this,e),this._vue=new v["default"]({store:$}),this.layers=[],this.sources=[],this.eventsLoaded=0,this.exactLocationColorName=this._vue.$styleConfig.styles["marker-varying"]["color"]["exact-location"],this.exactLocationColor=this._vue.$styleConfig.colors[this.exactLocationColorName],this.nearLocationColorName=this._vue.$styleConfig.styles["marker-varying"]["color"]["near-here"],this.nearLocationColor=this._vue.$styleConfig.colors[this.nearLocationColorName],this.cityColorName=this._vue.$styleConfig.styles["marker-varying"]["color"]["in_this_town_city"],this.cityColor=this._vue.$styleConfig.colors[this.cityColorName],this.countryColorName=this._vue.$styleConfig.styles["marker-varying"]["color"]["in_this_country"],this.countryColor=this._vue.$styleConfig.colors[this.countryColorName]}return Object(f["a"])(e,[{key:"initToggledLayersFromUrl",value:function(e){var t=this,a=this._vue.$mainConfig["toggleable-layers"];a.forEach((function(e){t.addLayerToMap(e)}))}},{key:"addLayerToMap",value:function(e){switch(e.type){case"geojson-remote":this.addGeoJSONRemoteToMap(e);break;case"baserow":this.addBaserowToMap(e,1);break;default:break}}},{key:"toggleLayer",value:function(e){if(this._vue.$map&&this._vue.$map.getLayer(e)){var t=this._vue.$map.getLayoutProperty(e,"visibility");"visible"===t?(this._vue.$map.setLayoutProperty(e,"visibility","none"),this.className=""):(this.className="active",this._vue.$map.setLayoutProperty(e,"visibility","visible"))}}},{key:"addGeoJSONRemoteToMap",value:function(e){var t=this,a=this._vue.$styleConfig["layer-placement"]["geojson"];m.a.get(e.url).then((function(n){var o={type:"FeatureCollection",features:n.data},i=e["layer-id"]+"-source";t._vue.$map.addSource(i,{type:"geojson",data:o});var s={id:e["layer-id"],type:"fill",source:i,layout:{visibility:"none"},paint:{"fill-color":["case",["==",["length",["get","color"]],7],["get","color"],"#00ffff"],"fill-opacity":.25}};if(a?t._vue.$map.addLayer(s,a):t._vue.$map.addLayer(s),e.labels){for(var r={type:"FeatureCollection",features:[]},c=0;c<o.features.length;c++)r.features.push({type:"Feature",properties:{name:o.features[c].properties.Name},geometry:Object(Le["a"])(o.features[c]).geometry});t._vue.$map.addSource(e["layer-id"]+"-labels-source",{type:"geojson",data:r}),t._vue.$map.addLayer({id:e["layer-id"]+"-labels",type:"symbol",source:e["layer-id"]+"-labels-source",layout:{"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top","text-size":10,visibility:e["visible-by-default"]?"visibility":"none"},paint:{"text-halo-width":.5,"text-halo-color":"black","text-color":"white"}})}}))}},{key:"getNumRows",value:function(e){return m()({method:"GET",url:"https://api.baserow.io/api/database/rows/table/".concat(e.tableid,"/?user_field_names=true&page=1&size=1").concat(e.filter?"&filter=":"").concat(e.filter||""),headers:{Authorization:"Token ".concat(this._vue.$mainConfig.api.keys.baserow)}})}},{key:"getURLEvent",value:function(e){var t="https://api.baserow.io/api/database/rows/table/33215/".concat(e,"/?user_field_names=true");return m()({method:"GET",url:t,headers:{Authorization:"Token ".concat(this._vue.$mainConfig.api.keys.baserow)}})}},{key:"addBaserowToMap",value:function(e,t){var a=this,n=this._vue.$styleConfig["layer-placement"]["events"];this._vue.$store.getters.getSelectedEventId>0&&this.getURLEvent(this._vue.$store.getters.getSelectedEventId).then((function(e){var t=[e.data];a._vue.$map.getSource("events-source")?a.updateCircleLayer(t,!0):a.addCircleLayer(n,t,!0)})).then((function(){L.$emit("select-url-event")})),this.getNumRows(e).then((function(t){for(var o=t.data.count,i=Math.ceil(o/e.sizeLimit),s=function(t){m()({method:"GET",url:"https://api.baserow.io/api/database/rows/table/".concat(e.tableid,"/?user_field_names=true&page=").concat(t+1).concat(e.sizeLimit?"&size=":"").concat(e.sizeLimit||"").concat(e.filter?"&filter=":"").concat(e.filter||""),headers:{Authorization:"Token ".concat(a._vue.$mainConfig.api.keys.baserow)}}).then((function(e){var o=e.data.results;a._vue.$map.getSource("events-source")?a.updateCircleLayer(o,!1):a.addCircleLayer(n,o,!1),a.eventsLoaded+=e.data.results.length,t>=i&&(a.eventsLoaded=0)})).catch((function(e){a.eventsLoaded=0,console.error(e)}))},r=0;r<i;r++)s(r)}))}},{key:"updateCircleLayer",value:function(e,t){for(var a=this._vue.$map.getSource("events-source"),n=this._vue.$dataManager.eventData,o=0;o<e.length;o++){var i=!t&&e[o].id===this._vue.$store.getters.getSelectedEventId;e[o].longitude&&e[o].latitude&&!i&&n.features.push({type:"Feature",properties:{name:e[o].id,title:e[o].title,geotag:e[o].geotag_info.toLowerCase().replaceAll(" ","_").replaceAll("/","_")},geometry:{type:"Point",coordinates:[e[o].longitude||Math.random(),e[o].latitude||Math.random()]}})}a.setData(n)}},{key:"styleCircleSelection",value:function(){var e=this,t=this,a=this._vue.$map,n=this._vue.$styleConfig.styles["marker-varying"]["highlightable-props"];if(-1===this._vue.$store.getters.getSelectedEventId)return n.forEach((function(e){a.setPaintProperty("events-circles",e["prop-name"],e["default"])})),a.setLayoutProperty("events-circles","circle-sort-key",0),void a.setPaintProperty("events-circles","circle-color",["match",["get","geotag"],"exact_location",t.exactLocationColor.primary,"near_here",t.nearLocationColor.primary,"in_this_town_city",t.cityColor.primary,"in_this_country",t.countryColor.primary,"#000000"]);a.setPaintProperty("events-circles","circle-color",["case",["==",["get","name"],this._vue.$store.getters.getSelectedEventId],["match",["get","geotag"],"exact_location",t.exactLocationColor.primary,"near_here",t.nearLocationColor.primary,"in_this_town_city",t.cityColor.primary,"in_this_country",t.countryColor.primary,"#000000"],["match",["get","geotag"],"exact_location",t.exactLocationColor.inactive,"near_here",t.nearLocationColor.inactive,"in_this_town_city",t.cityColor.inactive,"in_this_country",t.countryColor.inactive,"#000000"]]),a.setLayoutProperty("events-circles","circle-sort-key",["case",["==",["get","name"],this._vue.$store.getters.getSelectedEventId],9,0]),n.forEach((function(t){a.setPaintProperty("events-circles",t["prop-name"],["case",["==",["get","name"],e._vue.$store.getters.getSelectedEventId],t["active"],t["inactive"]])}))}},{key:"addCircleLayer",value:function(e,t,a){for(var n={type:"FeatureCollection",features:[]},o=0;o<t.length;o++){var i=!a&&t[o].id===this._vue.$store.getters.getSelectedEventId;t[o].longitude&&t[o].latitude&&!i&&n.features.push({type:"Feature",properties:{name:t[o].id,title:t[o].title,geotag:t[o].geotag_info.toLowerCase().replaceAll(" ","_").replaceAll("/","_")},geometry:{type:"Point",coordinates:[t[o].longitude||Math.random(),t[o].latitude||Math.random()]}})}this._vue.$dataManager.eventData=n,this._vue.$map.addSource("events-source",{type:"geojson",data:n});var s={id:"events-circles",type:"circle",source:"events-source",layout:{},paint:{"circle-color":["match",["get","geotag"],"exact_location",this.exactLocationColor.primary,"near_here",this.nearLocationColor.primary,"in_this_town_city",this.cityColor.primary,"in_this_country",this.countryColor.primary,"#000000"],"circle-stroke-width":2,"circle-stroke-color":"white"}},r={id:"event-hit-layer",type:"circle",source:"events-source",layout:{},paint:{"circle-color":"white","circle-opacity":0,"circle-radius":this._vue.$styleConfig.styles["marker-varying"]["hit-radius"]}};e?(this._vue.$map.addLayer(s,e),this._vue.$map.addLayer(r,e)):(this._vue.$map.addLayer(s),this._vue.$map.addLayer(r))}}]),e}(),Me={name:"App",components:{Map:X,InfoPanel:le,SideNav:ke,MainFooter:ve},beforeCreate:function(){v["default"].prototype.$dataManager=new $e,v["default"].prototype.$layerManager=new xe,v["default"].prototype.$querystringManager=new C,window.addEventListener("resize",(function(){}),!0)},data:function(){return{sideInstance:null,panelExpanded:!0,menuOpen:!1}},methods:{toggleExpand:function(){this.panelExpanded=!this.panelExpanded,this.$store.commit("setInfoPanelExpanded",this.panelExpanded),L.$emit("toggle-panel",this.panelExpanded)},openMenu:function(){this.menuOpen=!0,this.$store.commit("setNavMenuExpanded",!0),L.$emit("open-main-menu")}},watch:{},mounted:function(){var e=this,t=this;this.panelExpanded=window.location===window.parent.location;var a=new URLSearchParams(location.search),n=a.get("event");n&&this.$store.commit("setSelectedEventId",+n),L.$emit("toggle-panel",this.panelExpanded),L.$on("close-main-menu",(function(){t.menuOpen=!1})),L.$on("force-info-open",(function(){e.panelExpanded||(e.panelExpanded=!0,e.$store.commit("setInfoPanelExpanded",!0),L.$emit("toggle-panel",e.panelExpanded))})),L.$on("force-info-close",(function(){e.panelExpanded&&(e.panelExpanded=!1,e.$store.commit("setInfoPanelExpanded",!1),L.$emit("toggle-panel",e.panelExpanded))})),window.location!==window.parent.location&&this.$store.getters.isMobile&&document.querySelector("html").classList.add("in-iframe");var o=(this.$querystringManager.route.query.selected||"").split(",");o.length>0&&(t.$store.commit("setSelectedLngLat",o.map((function(e){return+e}))),this.$map.once("idle",(function(){L.$emit("select-district-from-url",o.map((function(e){return+e})))}))),L.$on("new-panel",(function(e){t.$refs.infoPanel.setData(e)})),this.$store.getters.isMobile&&window.innerHeight>window.innerWidth&&(document.querySelector("html").classList.add("in-iframe"),this.dialog=!0)}},Ee=Me,Se=(a("034f"),a("c643"),a("6964"),a("7496")),De=a("62ad"),je=a("a523"),Oe=a("0fd9"),He=Object(j["a"])(Ee,n,o,!1,null,"4b1e1420",null),Pe=He.exports;H()(He,{VApp:Se["a"],VCol:De["a"],VContainer:je["a"],VIcon:ae["a"],VRow:Oe["a"]});var Te=a("7898"),Ne=a.n(Te),Ve=(a("15f5"),v["default"].prototype.getOrientation=function(){return Math.max(document.documentElement["clientWidth"],document.body["scrollWidth"],document.documentElement["scrollWidth"],document.body["offsetWidth"],document.documentElement["offsetWidth"])>Math.max(document.documentElement["clientHeight"],document.body["scrollHeight"],document.documentElement["scrollHeight"],document.body["offsetHeight"],document.documentElement["offsetHeight"])?"landscape":"portrait"}),Fe=v["default"].prototype.setOrientation=function(){"portrait"===Ve()?(document.querySelector("body").classList.remove("landscape"),document.querySelector("body").classList.add("portrait")):(document.querySelector("body").classList.remove("portrait"),document.querySelector("body").classList.add("landscape"))};window.location!==window.parent.location?document.querySelector("body").classList.add("embed"):Fe(),window.addEventListener("resize",(function(){Fe()})),v["default"].config.productionTip=!1,v["default"].prototype.$axios=m.a,v["default"].use(Ne.a),v["default"].use(z.a);var Ie=function(e){e.forEach((function(e){e.data.name&&(v["default"].prototype["$".concat(e.data.name)]=e.data,e.data.baseurl&&(v["default"].prototype.$baseurl=e.data.baseurl))}))},qe=[m.a.get("./data/MainConfig.json"),m.a.get("./data/StyleConfig.json")];Promise.all(qe).then((function(e){new v["default"]({icons:{iconfont:"fa"},vuetify:new U["a"],store:$,created:function(){Ie(e)},mounted:function(){},render:function(e){return e(Pe)}}).$mount("#app")})).catch((function(e){G()("body > #loading").hide(),G()("body > #error").show(),G()("body > #error-message").show(),G()("body > #error-message").html(e.response.config.url+" : "+e+("<br/>MESSAGE: "+e.response.data.message||!1)),console.error(e.response.data),console.error(e.response.status),console.error(e.response.headers),G()("body > #error-message").show()}))},"63c0":function(e,t,a){},6964:function(e,t,a){"use strict";a("7dff")},"6cbf":function(e,t,a){"use strict";a("2538")},"7dff":function(e,t,a){},"85ec":function(e,t,a){},"9a5b":function(e,t,a){"use strict";a("0c24")},a216:function(e,t,a){"use strict";a("4ff7")},c223:function(e,t,a){},c643:function(e,t,a){"use strict";a("c223")}});
//# sourceMappingURL=app~d0ae3f07.fcb82813.js.map